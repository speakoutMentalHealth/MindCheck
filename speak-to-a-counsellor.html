<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Speak to a Counsellor | MindCheck</title>
  <meta name="description" content="Find a verified counsellor and start a chat on WhatsApp or another chat platform. Pay a small token for maintenance." />
  <style>
    :root { --bg:#0b1220; --card:#121a2b; --text:#eaf0ff; --muted:#b7c3e1; --accent:#22c55e; --line:rgba(255,255,255,.12); --danger:#fb7185; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; background:var(--bg); color:var(--text); }
    header, footer { padding:18px 16px; border-bottom:1px solid var(--line); }
    footer { border-top:1px solid var(--line); border-bottom:none; color:var(--muted); }
    .wrap { max-width:980px; margin:0 auto; }
    nav a { color:var(--text); text-decoration:none; margin-right:14px; opacity:.9; }
    nav a:hover { opacity:1; text-decoration:underline; }
    main { padding:22px 16px 36px; }
    h1 { margin:0 0 8px; font-size:28px; }
    p { margin:0 0 12px; color:var(--muted); line-height:1.45; }
    .toolbar { display:flex; gap:10px; flex-wrap:wrap; margin:14px 0 16px; }
    input, select {
      padding:10px 12px; border-radius:10px; border:1px solid var(--line);
      background:rgba(0,0,0,.18); color:var(--text); outline:none;
    }
    .grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
    @media (max-width: 900px){ .grid { grid-template-columns:1fr; } }
    .card { background:var(--card); border:1px solid var(--line); border-radius:14px; padding:14px; }
    .name { font-weight:800; font-size:16px; margin:0 0 4px; }
    .meta { color:var(--muted); font-size:13px; margin:0 0 10px; }
    .badge { display:inline-block; font-size:12px; padding:5px 9px; border-radius:999px; border:1px solid var(--line); color:var(--muted); }
    .live { border-color: rgba(34,197,94,.35); color:#86efac; }
    .offline { border-color: rgba(251,113,133,.35); color:#fda4af; }
    .btnrow { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .btn {
      display:inline-block; text-decoration:none; font-weight:800;
      padding:10px 12px; border-radius:12px; border:1px solid var(--line);
      color:var(--text); background:rgba(255,255,255,.06);
    }
    .btn.primary { background: rgba(34,197,94,.18); border-color: rgba(34,197,94,.35); }
    .btn.danger { background: rgba(251,113,133,.12); border-color: rgba(251,113,133,.35); }
    .note { font-size:13px; color:var(--muted); margin-top:12px; }
    .paybox { margin-top:14px; padding:12px; border-radius:14px; border:1px dashed var(--line); }
    .small { font-size:12px; }
  </style>
</head>

<body>
<header>
  <div class="wrap" style="display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap;">
    <div>
      <strong>MindCheck</strong>
      <span class="badge" style="margin-left:10px;">Speak to a counsellor</span>
    </div>
    <nav>
      <a href="./index.html">Home</a>
      <a href="./become-a-counsellor.html">Become a Counsellor</a>
      <a href="./speak-to-a-counsellor.html">Speak to a Counsellor</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <h1>Speak to a Counsellor</h1>
  <p>
    Browse verified counsellors and start a conversation on WhatsApp (or your preferred chat platform).
    A small token payment helps with maintenance and platform support.
  </p>

  <div class="toolbar">
    <input id="search" placeholder="Search by name or specialty…" />
    <select id="filterStatus">
      <option value="all">All</option>
      <option value="live">Live</option>
      <option value="offline">Offline</option>
    </select>
    <select id="filterSpecialty">
      <option value="all">All specialties</option>
      <option value="General counselling">General counselling</option>
      <option value="Marriage & relationships">Marriage & relationships</option>
      <option value="Stress & anxiety support">Stress & anxiety support</option>
      <option value="Youth & student support">Youth & student support</option>
      <option value="Grief support">Grief support</option>
      <option value="Other">Other</option>
    </select>
  </div>

  <div id="list" class="grid"></div>

  <div class="paybox">
    <strong>Payment (token)</strong>
    <p class="note">
      Static sites can’t process payments by themselves. You can integrate a hosted payment link (Paystack/Flutterwave),
      or embed their inline script if you later store keys securely on a backend.
    </p>

    <!-- OPTION A: Simple hosted payment link (recommended for GitHub Pages) -->
    <a class="btn primary" href="#" id="paymentLink" target="_blank" rel="noopener">Pay token before session</a>

    <p class="note small">
      Update the payment link in the code: search for <strong>PAYMENT_URL_HERE</strong>.
    </p>
  </div>

  <p class="note">
    Emergency note: If you feel you may harm yourself or someone else, please contact local emergency services immediately.
  </p>
</main>

<footer>
  <div class="wrap">
    <span class="small">MindCheck • SpeakOut Mental Health</span>
  </div>
</footer>

<script>
  // ✅ Replace with your hosted payment checkout URL (Paystack/Flutterwave link)
  const PAYMENT_URL = "PAYMENT_URL_HERE";
  document.getElementById("paymentLink").href = PAYMENT_URL;

  // Demo counsellor data (replace with your real, verified counsellors list)
  // Tip: later you can load this from a JSON file in your repo (e.g., /data/counsellors.json)
  const counsellors = [
    {
      id: "c1",
      name: "Counsellor A",
      specialty: "Marriage & relationships",
      status: "live",
      whatsapp: "2348012345678",
      chatUrl: "" // e.g., "https://tawk.to/chat/XXXX" or "https://your-chat-link"
    },
    {
      id: "c2",
      name: "Counsellor B",
      specialty: "Stress & anxiety support",
      status: "live",
      whatsapp: "2348098765432",
      chatUrl: ""
    },
    {
      id: "c3",
      name: "Counsellor C",
      specialty: "General counselling",
      status: "offline",
      whatsapp: "2347011122233",
      chatUrl: ""
    }
  ];

  const listEl = document.getElementById("list");
  const searchEl = document.getElementById("search");
  const filterStatusEl = document.getElementById("filterStatus");
  const filterSpecialtyEl = document.getElementById("filterSpecialty");

  function waLink(number, prefill) {
    // WhatsApp click-to-chat format:
    // https://wa.me/<number>?text=<encodedText>
    const text = encodeURIComponent(prefill || "");
    return `https://wa.me/${number}?text=${text}`;
  }

  function render() {
    const q = (searchEl.value || "").toLowerCase().trim();
    const st = filterStatusEl.value;
    const sp = filterSpecialtyEl.value;

    const filtered = counsellors.filter(c => {
      const matchesQ =
        !q ||
        c.name.toLowerCase().includes(q) ||
        (c.specialty || "").toLowerCase().includes(q);

      const matchesStatus = (st === "all") || (c.status === st);
      const matchesSpecialty = (sp === "all") || (c.specialty === sp);

      return matchesQ && matchesStatus && matchesSpecialty;
    });

    listEl.innerHTML = filtered.map(c => {
      const badgeClass = c.status === "live" ? "badge live" : "badge offline";
      const badgeText = c.status === "live" ? "Live now" : "Offline";

      const prefill = `Hello ${c.name}, I found you on MindCheck. I would like to book a counselling session.`;
      const whatsappUrl = waLink(c.whatsapp, prefill);

      const chatBtn = c.chatUrl
        ? `<a class="btn" href="${c.chatUrl}" target="_blank" rel="noopener">Open chat</a>`
        : `<a class="btn" href="${whatsappUrl}" target="_blank" rel="noopener">Open chat</a>`;

      return `
        <div class="card">
          <div class="name">${c.name}</div>
          <div class="meta">${c.specialty || "Counselling support"}</div>
          <span class="${badgeClass}">${badgeText}</span>

          <div class="btnrow">
            <a class="btn primary" href="${whatsappUrl}" target="_blank" rel="noopener">WhatsApp</a>
            ${chatBtn}
          </div>

          <div class="note small">
            Tip: pay token first, then message. If counsellor is offline, you can still send a message and they’ll respond later.
          </div>
        </div>
      `;
    }).join("");

    if (filtered.length === 0) {
      listEl.innerHTML = `<div class="card"><strong>No counsellors found.</strong><p class="note">Try changing your filters.</p></div>`;
    }
  }

  searchEl.addEventListener("input", render);
  filterStatusEl.addEventListener("change", render);
  filterSpecialtyEl.addEventListener("change", render);

  render();
</script>
</body>
</html>

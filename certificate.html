<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SpeakOut MindCheck ‚Äî Certificate</title>
  <link rel="icon" href="favicon.png"/>
  <link rel="stylesheet" href="mc-theme.css"/>
  <meta name="theme-color" content="#22c55e"/>

  <style>
    body {
      margin:0;
      padding:16px;
      background:#0f172a;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
    }
    .cert-page {
      background:#ffffff;
      border-radius:18px;
      padding:28px 40px;
      max-width:1120px;
      width:100%;
      aspect-ratio: 11 / 8.5; /* landscape feel */
      box-shadow:0 18px 45px rgba(15,23,42,0.35);
      position:relative;
      box-sizing:border-box;
    }
    .cert-border {
      position:absolute;
      inset:14px;
      border:2px solid #e2e8f0;
      border-radius:14px;
      pointer-events:none;
    }
    .cert-inner {
      position:relative;
      z-index:1;
      height:100%;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }
    .cert-top {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
    }
    .cert-logo {
      display:flex;
      align-items:center;
      gap:10px;
    }
    .cert-logo img {
      max-height:64px;
      width:auto;
      border-radius:12px;
    }
    .cert-title-block {
      text-align:right;
      font-size:.9rem;
      color:#475569;
    }
    .cert-main {
      text-align:center;
      margin-top:16px;
      padding:0 40px;
    }
    .cert-main h1 {
      font-size:1.8rem;
      margin:.25rem 0 .5rem;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:#0f172a;
    }
    .muted { color:#64748b; }
    .name {
      font-weight:800;
      font-size:1.6rem;
      margin:.5rem 0 .35rem;
      color:#0f172a;
    }
    .cert-meta {
      margin-top:12px;
      font-size:.98rem;
      color:#1e293b;
    }
    .cert-meta span {
      font-weight:600;
    }
    .cert-bottom {
      margin-top:24px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:16px;
    }
    .sign-block {
      text-align:center;
      flex:1;
    }
    .sign-line {
      border-top:1px solid #cbd5f5;
      margin-bottom:4px;
      margin-top:32px;
    }
    .sign-name {
      font-weight:700;
      color:#0f172a;
    }
    .sign-title {
      font-size:.9rem;
      color:#64748b;
    }
    .id-block {
      text-align:right;
      font-size:.9rem;
      color:#64748b;
      flex:1;
    }
    .id-pill {
      display:inline-block;
      border-radius:999px;
      border:1px solid #e2e8f0;
      padding:4px 10px;
      font-family:ui-monospace,Consolas,monospace;
      font-size:.85rem;
      color:#0f172a;
      background:#f8fafc;
    }
    .no-print-controls {
      margin-top:14px;
      text-align:center;
    }
    @media (max-width:900px){
      .cert-page {
        aspect-ratio:auto;
        padding:20px;
      }
      .cert-main {
        padding:0 10px;
      }
      .cert-bottom {
        flex-direction:column;
        align-items:flex-start;
      }
      .id-block {
        text-align:left;
      }
    }
    @media print {
      body {
        margin:0;
        padding:0;
        background:#ffffff;
      }
      .cert-page {
        margin:0;
        box-shadow:none;
        border-radius:0;
        max-width:none;
        width:100%;
      }
      .no-print { display:none !important; }
      @page {
        size: A4 landscape;
        margin:10mm;
      }
    }
  </style>

  <script defer data-domain="speakoutmentalhealth.github.io" src="https://plausible.io/js/script.js"></script>
  <script>
    (function(){
      try { window.plausible && window.plausible('CertificateViewed'); } catch(e){}
    })();
  </script>
</head>
<body>
  <div class="cert-page">
    <div class="cert-border"></div>
    <div class="cert-inner">
      <div class="cert-top">
        <div class="cert-logo">
          <!-- Replace src with your real logo path -->
          <img src="images/logo-speakout.png" alt="SpeakOut Logo"/>
          <div>
            <div style="font-weight:800;color:#0f172a;">SpeakOut Mental Health Outreach</div>
            <div class="muted" style="font-size:.88rem;">MindCheck Volunteer Programme</div>
          </div>
        </div>
        <div class="cert-title-block">
          <div style="font-weight:700;color:#0f172a;">MindCheck Nigeria</div>
          <div>Community Mental Health &amp; Early Support</div>
        </div>
      </div>

      <div class="cert-main">
        <p class="muted" style="text-transform:uppercase;letter-spacing:.2em;font-size:.82rem;margin-bottom:.35rem;">
          Certificate of Completion
        </p>
        <h1>Volunteer Training</h1>
        <p class="muted">This certifies that</p>
        <p id="cName" class="name">‚Äî</p>
        <p class="muted">
          has successfully completed the SpeakOut MindCheck volunteer training in safe listening, red-flag triage,
          ethical referral, privacy-first logging, and cultural sensitivity.
        </p>

        <div class="cert-meta">
          <p>
            <b>Score:</b> <span id="cScore">‚Äî</span>% &nbsp;‚Ä¢&nbsp;
            <b>Date:</b> <span id="cDate">‚Äî</span>
          </p>
        </div>
      </div>

      <div class="cert-bottom">
        <div class="sign-block">
          <div class="sign-line"></div>
          <div class="sign-name">Offorka Jerry</div>
          <div class="sign-title">Founder / Executive Director, SpeakOut</div>
        </div>
        <div class="id-block">
          <div>Certificate ID:</div>
          <div class="id-pill" id="cId">‚Äî</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Buttons + verify text (below download button) -->
  <div class="no-print no-print-controls">
    <button class="btn btn-primary" onclick="window.print()">Download / Print PDF</button>
    <a class="btn btn-ghost" href="training-hub.html">‚Üê Back to Training</a>
    <a class="btn btn-ghost" href="index.html">Home</a>

    <p class="muted" style="margin-top:8px;">
      To confirm this certificate, <a href="verify.html" target="_blank" rel="noopener">verify here</a>.
    </p>
  </div>

  <footer class="no-print" style="margin-top:10px;text-align:center;">
    üîí <a href="privacy.html">Privacy</a> ‚Ä¢
    üìÑ <a href="terms.html">Terms</a> ‚Ä¢
    üè• <a href="resources.html">Clinics & Resources</a> ‚Ä¢
    ‚úâÔ∏è <a href="mailto:speaaakout@gmail.com">speaaakout@gmail.com</a>
  </footer>

  <script>
    // Parse ?name=...&score=...&date=...&cid=...
    const params = new URLSearchParams(location.search);
    const name = params.get('name') || 'Volunteer';
    const score = params.get('score') || '100';
    const rawDateParam = params.get('date');
    const cidParam = params.get('cid');

    const dt = rawDateParam ? new Date(decodeURIComponent(rawDateParam)) : new Date();

    document.getElementById('cName').textContent = name;
    document.getElementById('cScore').textContent = score;
    document.getElementById('cDate').textContent = dt.toLocaleDateString();

    // Build / populate Certificate ID
    function generateFallbackId() {
      const y = dt.getFullYear();
      const m = String(dt.getMonth()+1).padStart(2,'0');
      const d = String(dt.getDate()).padStart(2,'0');
      const rand = Math.random().toString(36).slice(-6).toUpperCase();
      return `MC-CERT-${y}${m}${d}-${rand}`;
    }

    const cid = cidParam || generateFallbackId();
    document.getElementById('cId').textContent = cid;

    // Friendly fallback if opened directly with no URL params
    if (!params.get('name')) {
      try {
        const t = JSON.parse(localStorage.getItem('mc_training') || '{}');
        if (t.pct) {
          document.getElementById('cScore').textContent = Math.round(t.pct * 100);
          document.getElementById('cDate').textContent = new Date(t.date || Date.now()).toLocaleDateString();
        }
      } catch(e){}
    }
  </script>
</body>
</html>

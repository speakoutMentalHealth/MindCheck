<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SpeakOut MindCheck ‚Äî Certificate</title>
  <link rel="icon" href="favicon.png"/>
  <link rel="stylesheet" href="mc-theme.css"/>
  <meta name="theme-color" content="#22c55e"/>

  <style>
    body {
      background:#022335;
      margin:0;
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }

    header {
      display:none; /* keep the global app header out of the certificate page */
    }

    main {
      padding:8px;
    }

    .cert-shell {
      max-width:1120px;
      margin:0 auto;
    }

    .cert-card {
      position:relative;
      margin:8px auto;
      padding:18px;
      border-radius:26px;
      background:#0b1c33;
      box-shadow:0 18px 40px rgba(0,0,0,.35);
      display:flex;
      justify-content:center;
      align-items:center;
    }

    /* Landscape feel */
    .cert-inner {
      background:#fdfcf7;
      border-radius:20px;
      padding:18px 32px 16px;
      width:100%;
      max-width:1020px;
      aspect-ratio: 7 / 5; /* pushes a wide, landscape shape */
      position:relative;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      overflow:hidden;
    }

    /* Double border (blue outer, gold inner-dotted) */
    .cert-inner::before,
    .cert-inner::after {
      content:"";
      position:absolute;
      inset:10px;
      border-radius:18px;
      pointer-events:none;
    }

    .cert-inner::before {
      border:3px solid #0f3c61;
    }

    .cert-inner::after {
      inset:20px;
      border-radius:16px;
      border:2px dashed #e0b54b;
      box-shadow:0 0 0 1px rgba(255,255,255,.35) inset;
    }

    /* Watermark */
    .cert-watermark {
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0.07;
      pointer-events:none;
      z-index:0;
      background:url("icons/logo.png") center center / 280px 280px no-repeat;
    }

    .cert-content {
      position:relative;
      z-index:1;
      height:100%;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }

    .cert-top {
      text-align:center;
    }

    .cert-header-row {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      margin-bottom:4px;
    }

    .cert-logo-small {
      height:46px;
      width:auto;
      object-fit:contain;
    }

    .cert-org {
      font-weight:800;
      font-size:1.35rem;
      letter-spacing:.03em;
      color:#082f49;
      text-transform:none;
    }

    .cert-sub {
      font-size:.86rem;
      color:#4b5563;
      margin-top:2px;
    }

    .cert-title {
      margin:10px 0 6px;
      font-size:1.4rem;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:#111827;
    }

    .cert-body {
      max-width:720px;
      margin:0 auto;
      font-size:.98rem;
      color:#374151;
      line-height:1.38;
    }

    .cert-awarded {
      margin-top:10px;
      font-size:.9rem;
      color:#6b7280;
    }

    .cert-name {
      margin-top:4px;
      font-size:1.5rem;
      font-weight:800;
      color:#111827;
    }

    .cert-skill-text {
      margin-top:8px;
      font-size:.96rem;
      color:#374151;
    }

    .cert-score-row {
      margin-top:10px;
      font-size:.9rem;
      font-weight:600;
      color:#111827;
    }

    .cert-score-row span {
      margin-right:18px;
    }

    /* Bottom row: signature + QR / ID */
    .cert-bottom {
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      align-items:flex-end;
      justify-content:space-between;
      gap:20px;
    }

    .sign-block {
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      min-width:260px;
    }

    .sign-logos {
      display:flex;
      align-items:flex-end;
      gap:6px;
      margin-bottom:2px;
    }

    .sign-logo {
      height:50px;
      width:auto;
      object-fit:contain;
    }

    .sign-img {
      height:70px;
      width:auto;
      object-fit:contain;
      margin-bottom:2px; /* keeps it very close to the line */
    }

    .sign-line {
      width:250px;
      border-bottom:2px solid #111827;
      margin:0 0 5px;
    }

    .sign-name {
      font-weight:800;
      font-size:.98rem;
      color:#111827;
    }

    .sign-role {
      font-size:.84rem;
      color:#4b5563;
    }

    .qr-block {
      min-width:220px;
      max-width:280px;
      text-align:right;
      margin-left:auto;
    }

    .qr-label {
      font-size:.84rem;
      font-weight:700;
      color:#111827;
    }

    .qr-id {
      display:inline-block;
      margin:4px 0 6px;
      padding:3px 10px;
      border-radius:999px;
      border:1px dashed #e0b54b;
      font-size:.85rem;
      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background:#fff9e6;
    }

    .qr-img {
      display:block;
      width:96px;
      height:96px;
      border-radius:16px;
      margin-left:auto;
      box-shadow:0 0 0 1px rgba(148,163,184,.5);
      background:#f9fafb;
      object-fit:contain;
    }

    .qr-text {
      margin-top:6px;
      font-size:.78rem;
      color:#4b5563;
    }

    .qr-text a {
      color:#0f766e;
      text-decoration:underline;
      text-underline-offset:2px;
      font-weight:600;
    }

    .cert-actions {
      margin:10px auto 4px;
      text-align:center;
    }

    .btn-print {
      display:inline-block;
      padding:10px 28px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-weight:700;
      font-size:.95rem;
      background:#059669;
      color:#ecfdf5;
      box-shadow:0 10px 25px rgba(5,150,105,.45);
    }

    .btn-print:active {
      transform:translateY(1px);
      box-shadow:0 6px 16px rgba(5,150,105,.55);
    }

    .muted {
      color:#6b7280;
    }

    .no-print {
      display:block;
    }

    @media (max-width: 768px) {
      .cert-inner {
        padding:16px 18px 14px;
        aspect-ratio:auto;
      }
      .cert-bottom {
        align-items:flex-start;
      }
      .qr-block {
        text-align:left;
        margin-left:0;
      }
      .qr-img {
        margin-left:0;
      }
    }

    @media print {
      body {
        background:#ffffff !important;
      }
      @page {
        size: A4 landscape;
        margin:10mm;
      }
      .cert-card {
        box-shadow:none;
        margin:0;
      }
      .cert-inner {
        box-shadow:none;
      }
      .no-print {
        display:none !important;
      }
    }
  </style>

  <script defer data-domain="speakoutmentalhealth.github.io" src="https://plausible.io/js/script.js"></script>
  <script>
    (function(){
      try{ window.plausible && window.plausible('CertificateViewed'); }catch(e){}
    })();
  </script>
</head>
<body>
  <main>
    <div class="cert-shell">
      <div class="cert-card">
        <div class="cert-inner">
          <div class="cert-watermark"></div>
          <div class="cert-content">

            <div class="cert-top">
              <div class="cert-header-row">
                <img src="icons/logo.png" alt="SpeakOut MindCheck Logo" class="cert-logo-small"/>
                <div>
                  <div class="cert-org">SpeakOut MindCheck Nigeria</div>
                </div>
              </div>

              <h1 class="cert-title">Certificate of Volunteer Training</h1>

              <div class="cert-body">
                <p>
                  This certifies that the volunteer named below has successfully completed the
                  <b>SpeakOut MindCheck Volunteer Training</b> covering safe listening, risk recognition,
                  privacy-first logging, and ethical referral.
                </p>
              </div>

              <div class="cert-awarded">Awarded to</div>
              <div id="cName" class="cert-name">‚Äî</div>

              <p id="cSkill" class="cert-skill-text">
                By achieving the required pass mark, this volunteer has demonstrated readiness to support
                peers and community members in line with WHO-style community mental-health action.
              </p>

              <div class="cert-score-row">
                <span>Score: <span id="cScore">‚Äî</span>%</span>
                <span>Date: <span id="cDate">‚Äî</span></span>
              </div>
            </div>

            <div class="cert-bottom">
              <!-- Signature + logo block -->
              <div class="sign-block">
                <div class="sign-logos">
                  <img src="icons/logo.png" alt="SpeakOut logo" class="sign-logo"/>
                  <img src="icons/signature.png" alt="Signature of Offorka Jerry" class="sign-img"/>
                </div>
                <div class="sign-line"></div>
                <div class="sign-name">Offorka Jerry</div>
                <div class="sign-role">
                  Founder / Executive Director<br/>
                  SpeakOut Mental Health Outreach
                </div>
              </div>

              <!-- Certificate ID + QR -->
              <div class="qr-block">
                <div class="qr-label">Certificate ID</div>
                <div id="cId" class="qr-id">UNREGISTERED</div>
                <img id="qrImg" class="qr-img" alt="QR code for certificate verification"/>
                <p class="qr-text">
                  Scan to confirm this certificate with SpeakOut MindCheck‚Äôs verification service.
                  To confirm authenticity, please <a href="verify.html" id="verifyLink">verify here</a>.
                </p>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="cert-actions no-print">
        <button class="btn-print" onclick="window.print()">Download / Print PDF</button>
      </div>
    </div>
  </main>

  <footer class="no-print" style="text-align:center;font-size:.8rem;margin-bottom:8px;color:#9ca3af;">
    üîí <a href="privacy.html">Privacy</a> ‚Ä¢
    üìÑ <a href="terms.html">Terms</a> ‚Ä¢
    üè• <a href="resources.html">Clinics & Resources</a> ‚Ä¢
    ‚úâÔ∏è <a href="mailto:speaaakout@gmail.com">speaaakout@gmail.com</a>
  </footer>

  <script>
    // Read URL params
    const params = new URLSearchParams(location.search);
    const nameParam = params.get('name') || 'Volunteer';
    const scoreParam = params.get('score') || '100';
    const dateParam = params.get('date');
    const cidParam = params.get('cid') || '';

    const nameEl  = document.getElementById('cName');
    const scoreEl = document.getElementById('cScore');
    const dateEl  = document.getElementById('cDate');
    const idEl    = document.getElementById('cId');
    const qrImg   = document.getElementById('qrImg');
    const verifyLink = document.getElementById('verifyLink');

    // Name
    nameEl.textContent = nameParam;

    // Score
    scoreEl.textContent = scoreParam;

    // Date
    let dt = new Date();
    if (dateParam) {
      try { dt = new Date(decodeURIComponent(dateParam)); } catch(e) {}
    }
    dateEl.textContent = dt.toLocaleDateString();

    // Certificate ID + QR + verify link
    if (cidParam) {
      idEl.textContent = cidParam;

      // Build verify URL (front-end)
      const baseVerify = 'verify.html?id=' + encodeURIComponent(cidParam);
      verifyLink.href = baseVerify;

      const fullVerifyUrl = location.origin + location.pathname.replace('certificate.html','verify.html') + '?id=' + encodeURIComponent(cidParam);

      qrImg.src =
        'https://api.qrserver.com/v1/create-qr-code/?size=160x160&data=' +
        encodeURIComponent(fullVerifyUrl);
    } else {
      idEl.textContent = 'UNREGISTERED';
      qrImg.style.display = 'none';
      verifyLink.href = 'verify.html';
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SpeakOut MindCheck ‚Äî Certificate</title>
  <link rel="icon" href="favicon.png"/>
  <link rel="stylesheet" href="mc-theme.css"/>
  <meta name="theme-color" content="#22c55e"/>
  <style>
    body{background:#0f172a;margin:0;padding:0;}
    .cert-wrapper{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .cert{
      background:#ffffff;
      border-radius:18px;
      border:4px solid #22c55e;
      box-shadow:0 18px 45px rgba(15,23,42,.45);
      max-width:1100px;
      width:100%;
      aspect-ratio:11/8.5; /* horizontal certificate shape */
      padding:32px 40px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }
    .cert-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      border-bottom:2px solid #e5e7eb;
      padding-bottom:12px;
    }
    .cert-logo{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .cert-logo img{
      width:64px;
      height:64px;
      border-radius:16px;
      object-fit:contain;
    }
    .cert-title-block{
      text-align:right;
    }
    .cert-title-block h1{
      font-size:1.6rem;
      margin:0;
    }
    .cert-title-block .tagline{
      font-size:.9rem;
      color:#64748b;
    }
    .muted { color:#52606d; }
    .name { font-weight:800; font-size:1.6rem; }
    .cert-body{
      text-align:center;
      padding:14px 8px;
    }
    .cert-body p{margin:.35rem 0;}
    .meta-row{
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      gap:18px;
      margin-top:8px;
      font-size:.95rem;
    }
    .meta-pill{
      border-radius:999px;
      border:1px solid #e5e7eb;
      padding:6px 12px;
      background:#f9fafb;
    }
    .cert-footer{
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      flex-wrap:wrap;
      gap:18px;
      margin-top:12px;
    }
    .sig-block{
      min-width:220px;
      text-align:left;
    }
    .sig-line{
      border-bottom:2px solid #0f172a;
      height:24px;
      margin-bottom:4px;
      width:220px;
    }
    .sig-name{font-weight:700;}
    .sig-role{font-size:.9rem;color:#64748b;}
    .id-block{
      text-align:right;
      font-size:.95rem;
    }
    .id-block div{margin:.1rem 0;}
    @media print {
      body{background:#ffffff;}
      .no-print{display:none !important;}
      .cert-wrapper{padding:0;}
      .cert{box-shadow:none;border-width:2px;}
    }
  </style>
  <script defer data-domain="speakoutmentalhealth.github.io" src="https://plausible.io/js/script.js"></script>
  <script>
    (function(){ try{ window.plausible && window.plausible('CertificateViewed'); }catch(e){} })();
  </script>
</head>
<body>
  <header class="no-print">üß† SpeakOut MindCheck Nigeria</header>

  <main class="cert-wrapper">
    <div class="cert">
      <div class="cert-header">
        <div class="cert-logo">
          <!-- Replace logo.png with your real logo -->
          <img src="logo.png" alt="SpeakOut MindCheck logo">
          <div>
            <div style="font-weight:800;font-size:1.05rem;color:#0f172a;">SpeakOut Mental Health Outreach</div>
            <div class="muted" style="font-size:.9rem;">MindCheck Volunteer Training Programme</div>
          </div>
        </div>
        <div class="cert-title-block">
          <h1>Certificate of Volunteer Training</h1>
          <div class="tagline">Building safe listeners and referral champions across communities.</div>
        </div>
      </div>

      <div class="cert-body">
        <p class="muted">This certifies that</p>
        <p id="cName" class="name">‚Äî</p>
        <p class="muted">
          has successfully completed the SpeakOut MindCheck volunteer training, demonstrating understanding of
          safe listening, red-flag detection, ethical referral, privacy-first logging, and cultural sensitivity.
        </p>

        <div class="meta-row">
          <div class="meta-pill"><b>Score:</b> <span id="cScore">‚Äî</span>%</div>
          <div class="meta-pill"><b>Date:</b> <span id="cDate">‚Äî</span></div>
          <div class="meta-pill"><b>Certificate ID:</b> <span id="cId">‚Äî</span></div>
        </div>
      </div>

      <div class="cert-footer">
        <div class="sig-block">
          <div class="sig-line"></div>
          <div class="sig-name">Offorka Jerry</div>
          <div class="sig-role">Founder / Executive Director<br>SpeakOut Mental Health Outreach</div>
        </div>

        <div class="id-block">
          <div class="muted" style="font-size:.9rem;">
            This certificate is valid only when issued via the official MindCheck training hub.
          </div>
          <div class="no-print" style="margin-top:6px;">
            <button class="btn btn-primary" onclick="window.print()">Download / Print PDF</button>
          </div>
          <div class="muted no-print" style="margin-top:4px;">
            To confirm this certificate, <a href="verify.html" target="_blank" rel="noopener">verify here</a>.
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="no-print" style="margin-top:10px;text-align:center;">
    üîí <a href="privacy.html">Privacy</a> ‚Ä¢
    üìÑ <a href="terms.html">Terms</a> ‚Ä¢
    üè• <a href="resources.html">Clinics & Resources</a> ‚Ä¢
    ‚úâÔ∏è <a href="mailto:speaaakout@gmail.com">speaaakout@gmail.com</a>
  </footer>

  <script>
    // Parse ?name=...&score=...&date=...
    const params = new URLSearchParams(location.search);
    const name = params.get('name') || 'Volunteer';
    const score = params.get('score') || '100';
    const dt = params.get('date') ? new Date(decodeURIComponent(params.get('date'))) : new Date();

    document.getElementById('cName').textContent = name;
    document.getElementById('cScore').textContent = score;
    document.getElementById('cDate').textContent = dt.toLocaleDateString();

    // Generate a stable-ish certificate ID from name + score + date
    function makeCertId(n, s, dateObj){
      try{
        const raw = `${n}|${s}|${dateObj.toISOString().slice(0,10)}`;
        let hash = btoa(unescape(encodeURIComponent(raw))).replace(/=+/g,'').slice(-8).toUpperCase();
        return `MC-VOL-${hash}`;
      }catch(e){
        const y=dateObj.getFullYear();
        const m=String(dateObj.getMonth()+1).padStart(2,'0');
        const d=String(dateObj.getDate()).padStart(2,'0');
        return `MC-VOL-${y}${m}${d}`;
      }
    }

    const certId = makeCertId(name, score, dt);
    const idEl = document.getElementById('cId');
    if(idEl){ idEl.textContent = certId; }

    // Friendly fallback if opened directly (no query params)
    if (!params.get('name')) {
      try {
        const t = JSON.parse(localStorage.getItem('mc_training') || '{}');
        if (t.pct) {
          document.getElementById('cScore').textContent = Math.round(t.pct * 100);
          document.getElementById('cDate').textContent = new Date(t.date || Date.now()).toLocaleDateString();
        }
      } catch(e){}
    }
  </script>
</body>
</html>

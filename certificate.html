<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SpeakOut MindCheck ‚Äî Certificate</title>
  <link rel="icon" href="favicon.png"/>
  <link rel="stylesheet" href="mc-theme.css"/>
  <meta name="theme-color" content="#0f766e"/>

  <style>
    body{
      margin:0;
      background:#021b33;
    }
    header{
      text-align:center;
    }
    main{
      padding:10px;
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .cert-wrap{
      width:100%;
      max-width:980px;
      aspect-ratio: 4 / 3;          /* landscape feel */
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .cert-outer{
      width:100%;
      height:100%;
      background:linear-gradient(#073b4c,#02121f);
      padding:10px;
      border-radius:24px;
      box-sizing:border-box;
      box-shadow:0 16px 40px rgba(0,0,0,.45);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .cert-inner{
      width:100%;
      height:100%;
      border-radius:18px;
      padding:18px;
      box-sizing:border-box;
      background:
        linear-gradient(#facc15,#facc15) padding-box,
        linear-gradient(135deg,#0f172a,#facc15,#0f172a) border-box;
      border:4px solid transparent;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .cert-card{
      width:100%;
      height:100%;
      background:#fdfbf6;
      border-radius:14px;
      border:2px dashed #eab308;
      padding:20px 38px;
      box-sizing:border-box;
      position:relative;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .watermark{
      position:absolute;
      inset:10% 5%;
      background:url("icons/logo.png") center/360px auto no-repeat;
      opacity:0.06;
      pointer-events:none;
    }
    .cert-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      z-index:1;
    }
    .brand-block{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .brand-logo{
      width:110px;
      height:auto;
    }
    .brand-title{
      font-weight:800;
      font-size:1.4rem;
      color:#0f172a;
      letter-spacing:.03em;
    }
    .brand-sub{
      font-size:.82rem;
      color:#4b5563;
      max-width:320px;
    }
    .seal{
      font-size:2.8rem;
    }

    .cert-body{
      margin-top:8px;
      margin-bottom:10px;
      text-align:center;
      z-index:1;
    }
    .cert-heading{
      font-size:1.4rem;
      letter-spacing:.18em;
      font-weight:800;
      text-transform:uppercase;
      color:#111827;
      margin:0 0 6px;
    }
    .cert-text{
      font-size:.9rem;
      color:#4b5563;
      max-width:680px;
      margin:0 auto;
      line-height:1.5;
    }
    .awarded{
      margin-top:10px;
      font-size:.9rem;
      color:#4b5563;
    }
    .name{
      font-size:1.5rem;
      font-weight:800;
      color:#111827;
      margin:4px 0 2px;
    }
    .summary{
      font-size:.88rem;
      color:#4b5563;
      max-width:680px;
      margin:6px auto 0;
      line-height:1.45;
    }

    .score-row{
      display:flex;
      justify-content:center;
      gap:30px;
      margin-top:10px;
      font-size:.9rem;
      font-weight:600;
      color:#111827;
    }

    .bottom-row{
      margin-top:12px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:16px;
      font-size:.8rem;
      color:#374151;
      z-index:1;
    }
    .sig-block{
  flex:1.2;
  margin-top:10px;
}

.sig-img{
  height:150px;     /* increased from 42px ‚Üí 80px */
  width:auto;
  display:block;
  margin-bottom:0px;   /* reduces gap above signature line */
  margin-top:-10px;     /* pulls signature closer to line */
}

.sig-line{
  border-top:2px solid #111827;  /* darker, thicker line */
  margin:0;
  margin-top:-8px; /* tighter spacing */
}

.sig-name{
  font-weight:900;
  font-size:1rem;
  margin-top:2px;
}

.sig-role{
  font-size:.85rem;
  color:#374151;
}


    .qr-block{
      flex:1;
      text-align:center;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:4px;
    }
    .qr-img-wrap{
      width:110px;
      height:110px;
      border-radius:12px;
      border:1px solid #e5e7eb;
      background:#f9fafb;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .qr-img-wrap img{
      max-width:100%;
      max-height:100%;
      display:block;
    }
    .qr-caption{
      font-size:.75rem;
      color:#4b5563;
      max-width:180px;
    }

    .id-block{
      text-align:right;
      flex:1;
    }
    .id-label{
      font-weight:700;
      font-size:.82rem;
      color:#111827;
      margin-bottom:4px;
    }
    .id-pill{
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      border:1px dashed #eab308;
      background:#fefce8;
      font-size:.78rem;
      font-weight:600;
      color:#111827;
      letter-spacing:.04em;
    }
    .id-pill.bad{
      background:#fee2e2;
      border-color:#fecaca;
      color:#b91c1c;
    }

    .footer-row{
      margin-top:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:.75rem;
      color:#4b5563;
      z-index:1;
    }
    .btn-bar{
      margin-top:8px;
      text-align:center;
      z-index:1;
    }

    @media (max-width:768px){
      .cert-card{ padding:18px 18px; }
      .cert-header{
        flex-direction:row;
        align-items:flex-start;
      }
      .brand-sub{ display:none; }
      .bottom-row{
        flex-direction:column;
        align-items:flex-start;
      }
      .id-block{
        text-align:left;
        order:-1;
      }
      .cert-wrap{ aspect-ratio:auto; }
    }

    @media print{
      body{
        background:#ffffff;
      }
      header{
        display:none;
      }
      main{
        padding:0;
      }
      .cert-wrap{
        max-width:100%;
        aspect-ratio:auto;
      }
      .cert-outer{
        box-shadow:none;
        border-radius:0;
      }
      .cert-inner{
        border-radius:0;
      }
      .cert-card{
        border-radius:0;
      }
      .btn-bar,
      .footer-row{
        display:none !important;
      }
      @page{
        size: A4 landscape;
        margin:0;
      }
    }
  </style>

  <!-- Plausible event -->
  <script defer data-domain="speakoutmentalhealth.github.io"
          src="https://plausible.io/js/script.js"></script>
  <script>
    (function(){
      try{ window.plausible && window.plausible('CertificateViewed'); }catch(e){}
    })();
  </script>
</head>
<body>
  <header>üß† SpeakOut MindCheck Nigeria</header>

  <main>
    <div class="cert-wrap">
      <div class="cert-outer">
        <div class="cert-inner">
          <div class="cert-card">
            <div class="watermark"></div>

            <!-- TOP: brand + seal -->
            <div class="cert-header">
              <div class="brand-block">
                <img src="icons/logo.png" alt="SpeakOut MindCheck Logo" class="brand-logo"/>
                <div>
                  <div class="brand-title">SpeakOut MindCheck Nigeria</div>
                  <div class="brand-sub">
                    Community volunteer training for safe listening, risk recognition,
                    ethical referral, and privacy-first support.
                  </div>
                </div>
              </div>
              <div class="seal">üèÖ</div>
            </div>

            <!-- MIDDLE TEXT -->
            <div class="cert-body">
              <h1 class="cert-heading">Certificate of Volunteer Training</h1>
              <p class="cert-text">
                This certifies that the volunteer named below has successfully completed
                SpeakOut MindCheck‚Äôs core training, meeting the required pass mark.
              </p>

              <p class="awarded">Awarded to</p>
              <p id="cName" class="name">‚Äî</p>

              <p class="summary">
                The holder has demonstrated safe listening, risk recognition,
                timely escalation in emergencies, and privacy-first note-taking
                in line with WHO-style community mental-health action.
              </p>

              <div class="score-row">
                <span><b>Score:</b> <span id="cScore">‚Äî</span>%</span>
                <span><b>Date:</b> <span id="cDate">‚Äî</span></span>
              </div>
            </div>

            <!-- BOTTOM: signature, QR, ID -->
            <div class="bottom-row">
              <div class="sig-block">
                <img src="icons/signature.png" alt="Signature" class="sig-img"/>
                <div class="sig-line"></div>
                <div class="sig-name">Offorka Jerry</div>
                <div class="sig-role">
                  Founder / Executive Director<br/>
                  SpeakOut Mental Health Outreach
                </div>
              </div>

              <div class="qr-block">
                <div class="qr-img-wrap">
                  <img id="qrImg" alt="Verification QR code"/>
                </div>
                <div class="qr-caption">
                  Scan to confirm this certificate via
                  SpeakOut MindCheck‚Äôs verification page.
                </div>
              </div>

              <div class="id-block">
                <div class="id-label">Certificate ID</div>
                <div id="certIdPill" class="id-pill">UNREGISTERED</div>
              </div>
            </div>

            <!-- FOOTER INSIDE CARD -->
            <div class="footer-row">
              <span>SpeakOut MindCheck Nigeria &bull; School & community mental-health screening initiative</span>
              <span>Contact: speaaakout@gmail.com</span>
            </div>

            <!-- ACTIONS -->
            <div class="btn-bar no-print">
              <button class="btn btn-primary" onclick="window.print()">
                Download / Print PDF
              </button>
              <div style="margin-top:6px;font-size:.8rem;">
                To confirm authenticity, please
                <a id="verifyLink" href="verify.html" target="_blank" rel="noopener">verify here</a>.
              </div>
            </div>
          </div> <!-- /cert-card -->
        </div>
      </div>
    </div>
  </main>

  <footer class="no-print">
    üîí <a href="privacy.html">Privacy</a> ‚Ä¢
    üìÑ <a href="terms.html">Terms</a> ‚Ä¢
    üè• <a href="resources.html">Clinics & Resources</a> ‚Ä¢
    ‚úâÔ∏è <a href="mailto:speaaakout@gmail.com">speaaakout@gmail.com</a>
  </footer>

  <script>
    // Parse parameters: ?name=...&score=...&date=...&cert_id=...
    const params = new URLSearchParams(location.search);
    const name  = params.get('name')  || 'Volunteer';
    const score = params.get('score') || '100';
    const rawDt = params.get('date')  || '';
    const certId = params.get('cert_id') || params.get('id') || '';

    const nameEl  = document.getElementById('cName');
    const scoreEl = document.getElementById('cScore');
    const dateEl  = document.getElementById('cDate');
    const pillEl  = document.getElementById('certIdPill');
    const qrImg   = document.getElementById('qrImg');
    const verifyA = document.getElementById('verifyLink');

    nameEl.textContent  = name;
    scoreEl.textContent = score;

    let d;
    if (rawDt) {
      try { d = new Date(decodeURIComponent(rawDt)); } catch(e) { d = new Date(); }
    } else {
      d = new Date();
    }
    dateEl.textContent = d.toLocaleDateString();

    // Certificate ID display
    if (certId) {
      pillEl.textContent = certId;
      pillEl.classList.remove('bad');
    } else {
      pillEl.textContent = 'UNREGISTERED';
      pillEl.classList.add('bad');
    }

    // Build verify URL + QR code
    const verifyUrl = certId
      ? `${location.origin}${location.pathname.replace(/certificate\.html$/,'')}verify.html?id=${encodeURIComponent(certId)}`
      : `${location.origin}${location.pathname.replace(/certificate\.html$/,'')}verify.html`;

    verifyA.href = verifyUrl;

    // front-end QR generation via public API
    const qrApi = 'https://api.qrserver.com/v1/create-qr-code/?size=140x140&data=';
    qrImg.src = qrApi + encodeURIComponent(verifyUrl);
  </script>
</body>
</html>

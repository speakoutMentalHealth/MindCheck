<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>SpeakOut MindCheck ‚Äî Verify Certificate</title>
  <link rel="icon" href="favicon.png"/>
  <link rel="stylesheet" href="mc-theme.css"/>
  <meta name="theme-color" content="#22c55e"/>

  <style>
    .muted { color:#52606d; }
    .verify-card {
      max-width:480px;
      margin:0 auto;
      text-align:left;
    }
    .info-card {
      max-width:480px;
      margin:14px auto;
      font-size:.9rem;
      text-align:left;
    }
    .status-good { color:#166534; font-weight:600; }
    .status-warn { color:#854d0e; font-weight:600; }
    .status-bad  { color:#7f1d1d; font-weight:600; }
  </style>

  <!-- Plausible analytics -->
  <script defer data-domain="speakoutmentalhealth.github.io" src="https://plausible.io/js/script.js"></script>

  <!-- Optional: page-view event -->
  <script>
    (function(){
      try { window.plausible && window.plausible('VerifyPageViewed'); } catch(e){}
    })();
  </script>
</head>
<body>
  <header>üß† SpeakOut MindCheck Nigeria</header>

  <main>
    <h2>Verify Certificate</h2>
    <p class="muted" style="max-width:780px;margin:0 auto 10px;">
      Enter the Certificate ID exactly as it appears on the certificate
      (for example: <code>MCV-1A2B3C4D</code>).
    </p>

    <section class="card verify-card">
      <label for="certInput" style="display:block;margin-bottom:6px;font-weight:700;">Certificate ID</label>
      <input
        id="certInput"
        class="btn btn-ghost"
        style="width:100%;text-align:left"
        placeholder="MCV-XXXXXXXX"
      />

      <div class="toolbar" style="justify-content:flex-start;margin-top:10px;">
        <button id="verifyBtn" class="btn btn-primary" type="button">Check</button>
        <button id="clearBtn" class="btn btn-ghost" type="button">Clear</button>
        <a class="btn btn-ghost" href="certificate.html" target="_blank" rel="noopener">View Sample Certificate</a>
      </div>

      <p id="verifyResult" class="muted" style="margin-top:10px;"></p>
    </section>

    <section class="card info-card">
      <b>What this check does</b>
      <ul>
        <li>Confirms the ID matches the format used by SpeakOut MindCheck (e.g., <code>MCV-1A2B3C4D</code>).</li>
        <li>Helps schools, partners, or volunteers quickly pre-screen a certificate.</li>
        <li>For full confirmation, cross-check the name, date and score on the certificate or contact SpeakOut.</li>
      </ul>
      <p class="muted">
        For formal verification or concerns about misuse, email
        <a href="mailto:speaaakout@gmail.com">speaaakout@gmail.com</a>.
      </p>
    </section>

    <p class="toolbar" style="margin-top:10px;">
      <a class="btn btn-ghost" href="training-hub.html">‚Üê Back to Training Hub</a>
      <a class="btn btn-ghost" href="index.html">Home</a>
    </p>
  </main>

  <footer style="margin-top:20px;">
    üîí <a href="privacy.html">Privacy</a> ‚Ä¢
    üìÑ <a href="terms.html">Terms</a> ‚Ä¢
    üè• <a href="resources.html">Clinics & Resources</a> ‚Ä¢
    ‚úâÔ∏è <a href="mailto:speaaakout@gmail.com">speaaakout@gmail.com</a>
  </footer>

  <script>
    const input  = document.getElementById('certInput');
    const result = document.getElementById('verifyResult');
    const btn    = document.getElementById('verifyBtn');
    const clear  = document.getElementById('clearBtn');

    function normalizeId(raw){
      return (raw || '')
        .trim()
        .toUpperCase()
        .replace(/\s+/g, ''); // remove internal spaces
    }

    function checkFormat() {
      const raw = input.value;
      const id  = normalizeId(raw);

      if (!id) {
        result.className = 'muted';
        result.textContent = 'Please type a Certificate ID to check.';
        return;
      }

      // Expected pattern from certificate.html: MCV- + 8 hex characters
      const fullPattern   = /^MCV-[A-F0-9]{8}$/;
      const almostPattern = /^MCV-/;

      let statusClass = 'status-bad';
      let msg         = '';

      if (fullPattern.test(id)) {
        statusClass = 'status-good';
        msg = '‚úÖ Format OK. This looks like a valid SpeakOut MindCheck certificate ID. '
            + 'To fully confirm, please cross-check the name, date and score on the certificate '
            + 'or contact SpeakOut if you have any doubt.';
        try {
          window.plausible && window.plausible('CertificateVerifyValidFormat', { props:{ idPattern:'MCV-XXXXXXXX' }});
        } catch(e){}
      } else if (almostPattern.test(id)) {
        statusClass = 'status-warn';
        msg = '‚ö† The ID starts correctly with ‚ÄúMCV-‚Äù but does not match the expected format '
            + '(MCV-XXXXXXXX using numbers 0‚Äì9 and letters A‚ÄìF). Please check for typos.';
        try {
          window.plausible && window.plausible('CertificateVerifyAlmostFormat', { props:{ raw:id }});
        } catch(e){}
      } else {
        statusClass = 'status-bad';
        msg = '‚ùå Not recognized. The ID does not match the format used by SpeakOut MindCheck '
            + '(for example, MCV-1A2B3C4D). Please confirm you copied it correctly or contact SpeakOut.';
        try {
          window.plausible && window.plausible('CertificateVerifyInvalidFormat', { props:{ raw:id }});
        } catch(e){}
      }

      result.className = statusClass;
      result.textContent = msg;

      try {
        window.plausible && window.plausible('CertificateVerifyAttempt', { props:{ outcome:statusClass }});
      } catch(e){}
    }

    btn.addEventListener('click', checkFormat);
    clear.addEventListener('click', ()=>{
      input.value = '';
      result.className = 'muted';
      result.textContent = '';
    });

    // Allow Enter key to trigger check
    input.addEventListener('keydown', (ev)=>{
      if (ev.key === 'Enter') {
        ev.preventDefault();
        checkFormat();
      }
    });
  </script>
</body>
</html>

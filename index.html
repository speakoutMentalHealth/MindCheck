<!-- ✅ SpeakOut MindCheck with Simple Stats -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SpeakOut MindCheck 💚</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <style>
    :root {
      --green:#22c55e; --greenDark:#16a34a; --ink:#062436;
      --gray:#d1d5db; --bg:#f5fdf8; --card:#ffffff;
    }
    body {
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: var(--bg); color: var(--ink);
      text-align: center; margin: 0; padding: 0;
    }
    header {
      background: var(--green); color: #fff;
      padding: 1.2rem; font-size: 1.6rem; font-weight: 800;
    }
    p { margin: .75rem 0; }

    /* Buttons */
    .btn {
      border: none; padding: 15px 20px; border-radius: 14px;
      font-size: 1rem; cursor: pointer; transition: .15s ease;
    }
    .btn:hover { transform: translateY(-1px) scale(1.02); }
    .btn-primary { background: var(--green); color: #fff; box-shadow: 0 6px 20px rgba(34,197,94,0.3); }
    .btn-primary:hover { background: var(--greenDark); }
    .btn-ghost { background: #fff; border: 1px solid #e5e7eb; }

    /* Sections */
    section { display: none; padding: 16px; animation: fadeIn .35s ease-in-out; }
    section.active { display: block; }

    /* Home grid */
    .grid {
      display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap:14px; margin-top:16px; text-align:left;
    }
    .card {
      background: var(--card); border: 1px solid #eef2f7; border-radius: 14px;
      padding: 16px; box-shadow: 0 6px 18px rgba(2, 23, 34, 0.05);
      cursor:pointer; transition: transform .12s ease;
    }
    .card:hover { transform: translateY(-2px); }
    .card .big { font-size: 28px; line-height: 1; }
    .card h3 { margin:.4rem 0 .25rem; font-size: 1.05rem; }
    .card p { margin:.2rem 0 0; color:#52606d; font-size:.92rem; }

    /* Mood */
    .mood-row { display:flex; justify-content:center; gap:12px; margin:16px 0; flex-wrap: wrap; }
    .mood { font-size:28px; background:#fff; border:1px solid #ddd; border-radius:12px; padding:10px 12px; cursor:pointer; }
    .result { background:#f0f7ff; border:1px solid #cfe3ff; border-radius:10px; padding:12px; margin:12px auto; max-width:520px; }

    /* Animation */
    @keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }

    footer {
      margin: 28px 0 40px; font-size:.95rem; opacity:.9;
    }
    footer a { color: inherit; }
    .toolbar { display:flex; gap:10px; justify-content:center; margin-top:10px; flex-wrap: wrap; }
  </style>
</head>
<body>
  <header>🧠 SpeakOut MindCheck Nigeria</header>
  <p>Check your mental health privately, safely, and in your preferred language.</p>

  <!-- Step 1: Start -->
  <button id="startBtn" type="button" class="btn btn-primary">Start Now</button>

  <!-- Step 2: Language -->
  <section id="langSection">
    <p><b>🌍 Choose your language:</b></p>
    <div>
      <button class="btn btn-primary" id="langEnglish">English</button>
    </div>
  </section>

  <!-- Step 3A: Home Categories + Stats -->
  <section id="homeSection">
    <h2>Welcome to MindCheck 🌿</h2>
    <p id="statsText" style="color:#334155;font-weight:500;margin-bottom:10px;"></p>

    <div class="grid">
      <div class="card" id="goMood">
        <div class="big">😊</div>
        <h3>Check Your Mood</h3>
        <p>Tap an emoji and get a quick tip.</p>
      </div>

      <div class="card" id="goScreenings">
        <div class="big">🧠</div>
        <h3>Screenings</h3>
        <p>Quick self-tests like WHO-5 and PHQ-9.</p>
      </div>

      <div class="card" id="goTips">
        <div class="big">🌿</div>
        <h3>Wellness Tips</h3>
        <p>Small actions that make a big difference.</p>
      </div>

      <div class="card" id="goHelp">
        <div class="big">📞</div>
        <h3>Get Help</h3>
        <p>Find support or talk to someone.</p>
      </div>
    </div>
  </section>

  <!-- Step 3B: Mood Check-in -->
  <section id="moodSection">
    <h2>How are you feeling today?</h2>
    <div class="mood-row">
      <button class="mood" data-val="4">😄</button>
      <button class="mood" data-val="3">😊</button>
      <button class="mood" data-val="2">😐</button>
      <button class="mood" data-val="1">😞</button>
      <button class="mood" data-val="0">😢</button>
    </div>
    <div id="moodResult" class="result" style="display:none;"></div>
    <div class="toolbar">
      <button id="moodBackHome" class="btn btn-ghost">Back to Home</button>
    </div>
  </section>

  <!-- Step 3C: Form (Screenings) -->
  <section id="formContainer">
    <iframe id="formFrame" src="" title="MindCheck form"></iframe>
    <div class="toolbar">
      <button id="formBackHome" class="btn btn-ghost">Back to Home</button>
    </div>
  </section>

  <footer>
    🔒 <a href="/MindCheck/privacy.html">Privacy</a> •
    📄 <a href="/MindCheck/terms.html">Terms</a> •
    ✉️ <a href="mailto:speaaakout@gmail.com">support@speakout.ng</a>
  </footer>

  <script>
    const startBtn=document.getElementById('startBtn');
    const langSection=document.getElementById('langSection');
    const homeSection=document.getElementById('homeSection');
    const moodSection=document.getElementById('moodSection');
    const formContainer=document.getElementById('formContainer');
    const moodResult=document.getElementById('moodResult');
    const statsText=document.getElementById('statsText');
    const formFrame=document.getElementById('formFrame');

    function show(section){
      [langSection,homeSection,moodSection,formContainer].forEach(s=>s.classList.remove('active'));
      section.classList.add('active');
      section.scrollIntoView({behavior:'smooth'});
      if(section===homeSection){updateStats();}
    }

    startBtn.onclick=()=>{startBtn.style.display='none';show(langSection);};
    document.getElementById('langEnglish').onclick=()=>show(homeSection);

    document.getElementById('goMood').onclick=()=>show(moodSection);
    document.getElementById('moodBackHome').onclick=()=>show(homeSection);
    document.getElementById('formBackHome').onclick=()=>show(homeSection);
    document.getElementById('goScreenings').onclick=()=>{
      formFrame.src='https://tally.so/r/w2QbOV';
      show(formContainer);
    };
    document.getElementById('goTips').onclick=()=>alert('Tips coming soon.');
    document.getElementById('goHelp').onclick=()=>alert('Help page coming soon.');

    // Mood check-ins
    document.querySelectorAll('.mood').forEach(btn=>{
      btn.onclick=()=>{
        const val=parseInt(btn.dataset.val);
        const emoji=['😢','😞','😐','😊','😄'][val];
        let tip="Take a slow deep breath for 60 seconds.";
        if(val>=3) tip="Great mood! Spread kindness today 🌻.";
        if(val===2) tip="Take a short walk to refresh.";
        if(val<=1) tip="You’re not alone — breathe and reach out if you need to.";
        moodResult.style.display='block';
        moodResult.innerHTML=`<p>Thanks for checking in ${emoji}</p><p><b>Tip:</b> ${tip}</p>`;
        storeCheckin(val);
      };
    });

    function storeCheckin(mood){
      const key='mc_mood_history';
      let arr=[];
      try{arr=JSON.parse(localStorage.getItem(key)||'[]');}catch(e){}
      arr.push({ts:new Date().toISOString(),mood_value:mood});
      localStorage.setItem(key,JSON.stringify(arr));
    }

    function updateStats(){
      const key='mc_mood_history';
      let arr=[];
      try{arr=JSON.parse(localStorage.getItem(key)||'[]');}catch(e){}
      const now=new Date();
      const weekAgo=new Date(now);
      weekAgo.setDate(now.getDate()-7);
      const weekCount=arr.filter(i=>{
        const t=new Date(i.ts);
        return t>=weekAgo && t<=now;
      }).length;
      const message=weekCount>0
        ? `📊 You’ve checked your mood ${weekCount} time${weekCount>1?'s':''} this week.`
        : `📊 You haven’t checked your mood this week yet — try it now!`;
      statsText.textContent=message;
    }

    // Start on first screen
    show(startBtn);
  </script>
</body>
</html>

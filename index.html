<script>
  /* ---------------- Basics & Sections ---------------- */
  const startBtn=document.getElementById('startBtn');
  const langSection=document.getElementById('langSection');
  const homeSection=document.getElementById('homeSection');
  const moodSection=document.getElementById('moodSection');
  const formContainer=document.getElementById('formContainer');
  const tipsSection=document.getElementById('tipsSection');
  const helpSection=document.getElementById('helpSection');
  const badgesSection=document.getElementById('badgesSection');

  const formFrame=document.getElementById('formFrame');
  const statsText=document.getElementById('statsText');
  const pointsPill=document.getElementById('pointsPill');
  const streakPill=document.getElementById('streakPill');
  const awardsPill=document.getElementById('awardsPill');
  const tipsDonePill=document.getElementById('tipsDonePill');
  const moodResult=document.getElementById('moodResult');

  const tipText=document.getElementById('tipText');
  const tipNote=document.getElementById('tipNote');
  const nextTipBtn=document.getElementById('nextTip');
  const tipsGreeting=document.getElementById('tipsGreeting');
  const tipSaveBtn=document.getElementById('tipSaveBtn');
  const tipDoneBtn=document.getElementById('tipDoneBtn');
  const tipStatus=document.getElementById('tipStatus');
  const savedTipsList=document.getElementById('savedTipsList');

  const badgesGrid=document.getElementById('badgesGrid');
  const awardsList=document.getElementById('awardsList');

  const crisisBanner=document.getElementById('crisisBanner');
  const dismissCrisis=document.getElementById('dismissCrisis');
  const sparkSVG=document.getElementById('moodSpark');

  function show(section){
    [langSection,homeSection,moodSection,formContainer,tipsSection,helpSection,badgesSection]
      .forEach(s=>s.classList.remove('active'));
    section.classList.add('active');
    section.scrollIntoView({behavior:'smooth'});

    if(section===homeSection){ updateStats(); updateHeaderPills(); renderSparkline(); }
    if(section===badgesSection){ renderBadges(); renderAwards(); }
    if(section===tipsSection){ renderSavedTips(); renderTip(); } // ensure Tips initializes every time
  }

  // Start ‚Üí Language
  startBtn.onclick=()=>{startBtn.style.display='none';show(langSection);};
  document.querySelectorAll('.tbtn.live').forEach(btn=>{
    btn.onclick=()=>{ localStorage.setItem('mc_lang', btn.dataset.lang || 'en'); show(homeSection); };
  });

  // Main nav
  document.getElementById('goMood').onclick=()=>show(moodSection);
  document.getElementById('moodBackHome').onclick=()=>show(homeSection);

  document.getElementById('goScreenings').onclick=()=>{
    formFrame.src='https://tally.so/r/w2QbOV';
    show(formContainer);
  };
  document.getElementById('formBackHome').onclick=()=>show(homeSection);

  document.getElementById('goTips').onclick=(e)=>{
    e.preventDefault();
    // üîß FIX: lastMoodTag exists now; safe fallback to 'all'
    try{ currentTipFilter = lastMoodTag(); }catch{ currentTipFilter='all'; }
    show(tipsSection);
  };
  document.getElementById('tipsBackHome').onclick=()=>show(homeSection);

  document.getElementById('goHelp').onclick=(e)=>{e.preventDefault(); show(helpSection);};
  document.getElementById('helpBackHome').onclick=()=>show(homeSection);

  document.getElementById('goBadges').onclick=()=>show(badgesSection);
  document.getElementById('badgesBackHome').onclick=()=>show(homeSection);

  /* ---------------- Local Storage Keys ---------------- */
  const KEY_UID='mc_uid';
  const KEY_POINTS='mc_points';
  const KEY_STREAK='mc_streak';
  const KEY_LAST='mc_lastCheckin'; // "YYYY-MM-DD"
  const KEY_HISTORY='mc_mood_history';
  const KEY_BADGES='mc_badges';
  const KEY_AWARDS='mc_awards';
  const KEY_TIPS_SAVED='mc_tips_saved'; // [{text,saved_at}]
  const KEY_TIPS_DONE ='mc_tips_done';  // [{text,done_at}]
  const KEY_CRISIS_DISMISS='mc_crisis_dismiss_date'; // YYYY-MM-DD

  /* ---------------- UID ---------------- */
  function getUID(){
    let uid = localStorage.getItem(KEY_UID);
    if(!uid){
      uid = (crypto && crypto.randomUUID) ? crypto.randomUUID() : ('mc_'+Math.random().toString(36).slice(2));
      localStorage.setItem(KEY_UID, uid);
    }
    return uid;
  }
  const UID = getUID();

  /* ---------------- Helpers ---------------- */
  function todayStr(){
    const d=new Date();
    const y=d.getFullYear();
    const m=String(d.getMonth()+1).padStart(2,'0');
    const day=String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${day}`;
  }
  function isoToDate(iso){ return new Date(iso); }
  function getJSON(key, fallback){ try{ return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); }catch(e){ return fallback; } }
  function setJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
  const getPoints=()=>parseInt(localStorage.getItem(KEY_POINTS)||'0',10);
  const setPoints=v=>localStorage.setItem(KEY_POINTS, String(v));
  const addPoints=n=>setPoints(getPoints()+n);
  const getStreak=()=>parseInt(localStorage.getItem(KEY_STREAK)||'0',10);
  const setStreak=v=>localStorage.setItem(KEY_STREAK, String(v));
  const getLast=()=>localStorage.getItem(KEY_LAST) || '';
  const setLast=v=>localStorage.setItem(KEY_LAST, v);
  const getBadges=()=>getJSON(KEY_BADGES, []);
  const setBadges=arr=>setJSON(KEY_BADGES, arr);
  const hasBadge=id=>getBadges().includes(id);
  function awardBadge(id){ const b=getBadges(); if(!b.includes(id)){ b.push(id); setBadges(b); return true;} return false; }
  const getAwards=()=>getJSON(KEY_AWARDS, []);
  const setAwards=arr=>setJSON(KEY_AWARDS, arr);

  // tips stores
  function getSavedTips(){ return getJSON(KEY_TIPS_SAVED, []); }
  function setSavedTips(arr){ setJSON(KEY_TIPS_SAVED, arr); }
  function getDoneTips(){ return getJSON(KEY_TIPS_DONE, []); }
  function setDoneTips(arr){ setJSON(KEY_TIPS_DONE, arr); }

  /* ---------------- Config ---------------- */
  const AWARD_AMOUNT_NAIRA = 1000;
  const WHATSAPP_NUMBER = '2348118103510';

  /* ---------------- Mood Check-in (Once Daily + Awards + Crisis banner) ---------------- */
  document.querySelectorAll('.mood').forEach(btn=>{
    btn.onclick=()=>handleCheckin(parseInt(btn.dataset.val,10));
  });

  function handleCheckin(moodValue){
    const today = todayStr();
    const last = getLast();
    if(last===today){
      moodResult.style.display='block';
      moodResult.innerHTML=`<p>‚úÖ You already checked in today. Come back tomorrow!</p>`;
      return;
    }

    // Points, last, streak
    addPoints(10);
    setLast(today);
    const yesterdayStr = (()=>{ const d=new Date(); d.setDate(d.getDate()-1); return d.toISOString().slice(0,10); })();
    if(last===yesterdayStr){ setStreak(getStreak()+1); } else { setStreak(1); }

    // History
    const arr=getJSON(KEY_HISTORY, []); arr.push({ ts:new Date().toISOString(), mood_value:moodValue }); setJSON(KEY_HISTORY, arr);

    // Tip + feedback
    const emoji=['üò¢','üòû','üòê','üòä','üòÑ'][moodValue] || 'üòê';
    let tip="Take a deep breath for 60 seconds.";
    if(moodValue>=3) tip="Great mood! Share a smile today üåª.";
    if(moodValue===2) tip="Stretch or walk a little to refresh.";
    if(moodValue<=1) tip="You‚Äôre not alone ‚Äî breathe and reach out if you need help.";

    // Badges
    const newly=[];
    if(awardBadge('first_checkin')) newly.push('First Check-in');
    if(getStreak()>=3 && awardBadge('streak_3')) newly.push('3-Day Streak');
    if(getStreak()>=7 && awardBadge('streak_7')) newly.push('7-Day Streak');
    const pts=getPoints();
    if(pts>=100 && awardBadge('points_100')) newly.push('100 Points');
    if(pts>=300 && awardBadge('points_300')) newly.push('300 Points');

    // Award (every 20-day streak)
    let awardHTML='';
    const streak = getStreak();
    if(streak>0 && streak%20===0){
      const created = createStreakAwardIfNew(streak);
      if(created){
        awardHTML = `<p style="font-size:1.05rem;">üéÅ <b>Congratulations!</b> You‚Äôve won <b>‚Ç¶${AWARD_AMOUNT_NAIRA.toLocaleString()}</b> for your <b>${streak}-day streak</b>.<br/>Use your Award ID to claim on WhatsApp.</p>
        <p>Award ID: <span class="id" style="font-family:ui-monospace,Consolas,monospace;">${created.id}</span></p>
        <p><a class="btn btn-primary" href="${whatsAppClaimLink(created)}" target="_blank" rel="noopener">Claim via WhatsApp</a></p>`;
      }
    }

    moodResult.style.display='block';
    moodResult.innerHTML=`
      <p>üéâ Thanks for checking in ${emoji} ‚Äî you earned <b>+10 points</b>.</p>
      <p>Streak: <b>${getStreak()}</b> day(s) ‚Ä¢ Points: <b>${getPoints()}</b></p>
      <p><b>Tip:</b> ${tip}</p>
      ${newly.length ? `<p>üèÖ New badge${newly.length>1?'s':''}: <b>${newly.join(', ')}</b></p>` : ''}
      ${awardHTML}
    `;

    maybeShowCrisis();
    updateHeaderPills();
    renderSparkline();
  }

  function createStreakAwardIfNew(streakCycle){
    const awards = getAwards();
    const exists = awards.find(a => a.streak_cycle===streakCycle);
    if(exists) return null;
    const today = new Date();
    const y = today.getFullYear();
    const m = String(today.getMonth()+1).padStart(2,'0');
    const d = String(today.getDate()).padStart(2,'0');
    const uidTail = UID.replace(/-/g,'').slice(-6).toUpperCase();
    const id = `MC-${y}${m}${d}-${uidTail}-${streakCycle}`;
    const award = { id, amount: AWARD_AMOUNT_NAIRA, issued_at: today.toISOString(), streak_cycle: streakCycle, uid: UID, claimed: false, claimed_at: null };
    awards.push(award); setAwards(awards); return award;
  }

  function whatsAppClaimLink(award){
    const msg = encodeURIComponent(`Hello SpeakOut,\n\nI want to claim my MindCheck award.\nAward ID: ${award.id}\nAmount: ‚Ç¶${award.amount}\nUID: ${UID}\n\nThank you!`);
    return `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
  }

  /* ---------------- Home Stats, Pills & Sparkline ---------------- */
  function updateHeaderPills(){
    pointsPill.textContent=getPoints();
    streakPill.textContent=getStreak();
    const pend = getAwards().filter(a=>!a.claimed).length;
    awardsPill.textContent = pend;
    if (tipsDonePill) tipsDonePill.textContent = tipsDoneLast7d();
  }
  function updateStats(){
    const arr=getJSON(KEY_HISTORY, []);
    const now=new Date(); const weekAgo=new Date(now); weekAgo.setDate(now.getDate()-7);
    const weekCount=arr.filter(i=>{ const t=isoToDate(i.ts); return t>=weekAgo && t<=now; }).length;
    statsText.textContent = weekCount>0
      ? `üìä You‚Äôve checked your mood ${weekCount} time${weekCount>1?'s':''} this week.`
      : `üìä You haven‚Äôt checked your mood this week yet ‚Äî try it now!`;
  }
  function tipsDoneLast7d(){
    const done=getDoneTips(); const now=new Date(); const wk=new Date(now); wk.setDate(now.getDate()-7);
    return done.filter(i=>{const t=new Date(i.done_at); return t>=wk && t<=now;}).length;
  }
  function renderSparkline(){
    if(!sparkSVG) return;
    const arr=getJSON(KEY_HISTORY, []);
    // build last 7 calendar days, pick last mood of each day (or null)
    const days=[];
    for(let i=6;i>=0;i--){
      const d=new Date(); d.setDate(d.getDate()-i);
      const dayStr=d.toISOString().slice(0,10);
      const dayEntries=arr.filter(x=>x.ts.slice(0,10)===dayStr);
      const val=dayEntries.length?dayEntries[dayEntries.length-1].mood_value:null; // 0‚Äì4 or null
      days.push(val);
    }
    const step=120/6; // 7 points
    const yFor=v => 20 - ( (v??0) / 4 ) * 18 - 1;
    let dpath=''; let x=0;
    days.forEach((v,idx)=>{
      const y=yFor(v);
      if(v===null){ x+=step; return; }
      if(!dpath){ dpath=`M ${x.toFixed(1)} ${y.toFixed(1)}`; }
      else{ dpath+=` L ${x.toFixed(1)} ${y.toFixed(1)}`; }
      x+=step;
    });
    const dots = days.map((v,idx)=>{
      if(v===null) return '';
      const cx=(step*idx).toFixed(1);
      const cy=yFor(v).toFixed(1);
      return `<circle cx="${cx}" cy="${cy}" r="1.5"></circle>`;
    }).join('');
    sparkSVG.innerHTML = dpath
      ? `<path d="${dpath}" fill="none" stroke="currentColor" stroke-width="1"/>${dots}`
      : ''; // no data yet
  }

  /* ---------------- Badges ---------------- */
  const BADGE_CATALOG = [
    { id:'first_checkin', name:'First Check-in', desc:'Your first ever mood check.' },
    { id:'streak_3', name:'3-Day Streak', desc:'Checked your mood 3 days in a row.' },
    { id:'streak_7', name:'7-Day Streak', desc:'Checked your mood 7 days in a row.' },
    { id:'points_100', name:'100 Points', desc:'Reached 100 total points.' },
    { id:'points_300', name:'300 Points', desc:'Reached 300 total points.' },
  ];
  function renderBadges(){
    const owned=new Set(getBadges());
    badgesGrid.innerHTML = BADGE_CATALOG.map(b=>{
      const unlocked=owned.has(b.id);
      return `
        <div class="badge ${unlocked?'':'locked'}">
          <div class="name">üèÖ ${b.name}</div>
          <div class="desc">${b.desc}</div>
          <div class="status">${unlocked ? 'Unlocked ‚úÖ' : 'Locked üîí'}</div>
        </div>
      `;
    }).join('');
  }

  /* ---------------- Awards List ---------------- */
  function renderAwards(){
    const awards = getAwards().sort((a,b)=> new Date(b.issued_at) - new Date(a.issued_at));
    if(!awards.length){
      awardsList.innerHTML = `<div class="award"><p>No awards yet. Keep your streak to win ‚Ç¶${AWARD_AMOUNT_NAIRA.toLocaleString()} every 20 days.</p></div>`;
      return;
    }
    awardsList.innerHTML = awards.map(a=>{
      const when = new Date(a.issued_at).toLocaleString();
      const status = a.claimed ? `Claimed ‚úÖ (${new Date(a.claimed_at).toLocaleString()})` : 'Pending üîî';
      const btns = a.claimed ? '' : `
        <a class="btn btn-primary" href="${whatsAppClaimLink(a)}" target="_blank" rel="noopener">Claim via WhatsApp</a>
        <button class="btn btn-ghost" data-mark="${a.id}">Mark as Claimed</button>
      `;
      return `
        <div class="award">
          <div class="row">
            <div>
              <div><b>‚Ç¶${a.amount.toLocaleString()}</b> ‚Ä¢ Streak: ${a.streak_cycle} days</div>
              <div>ID: <span class="id">${a.id}</span></div>
              <div style="color:#52606d">Issued: ${when} ‚Ä¢ ${status}</div>
            </div>
            <div>${btns}</div>
          </div>
        </div>
      `;
    }).join('');
    document.querySelectorAll('[data-mark]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-mark');
        const list = getAwards();
        const idx = list.findIndex(x=>x.id===id);
        if(idx>-1){
          list[idx].claimed = true;
          list[idx].claimed_at = new Date().toISOString();
          setAwards(list);
          renderAwards();
          updateHeaderPills();
          alert('Marked as claimed. Thank you!');
        }
      });
    });
  }

  /* ---------------- Dynamic Wellness Tips (time-aware + save/done) ---------------- */
  const TIPS = [
    { text: "üßò‚Äç‚ôÄÔ∏è Do the 4-7-8 breathing: inhale 4s, hold 7s, exhale 8s. Repeat 4 cycles.", tags: ["anxious","calm","neutral"], times:["evening","night"] },
    { text: "üö∂‚Äç‚ôÇÔ∏è Take a 10-minute mindful walk. Notice 3 sounds, 3 sights, 3 smells.", tags: ["low","neutral","positive"], times:["morning","afternoon"] },
    { text: "üìì Write three gratitudes. Keep each to one sentence to make it easy.", tags: ["neutral","low","positive"], times:["evening"] },
    { text: "üíß Drink a full glass of water, then stretch neck, shoulders, and back for one minute.", tags: ["low","neutral","all"], times:["morning","afternoon"] },
    { text: "üìµ Mute non-urgent notifications for 30 minutes and do one tiny task you‚Äôve avoided.", tags: ["anxious","calm","neutral"], times:["afternoon"] },
    { text: "üé∂ Play one uplifting song. Breathe with the rhythm or sing along to release tension.", tags: ["low","neutral","positive"], times:["morning","afternoon","evening"] },
    { text: "üå§ Get 5 minutes of sunlight. Look at the sky (not the sun) and take 5 deep breaths.", tags: ["low","neutral","positive"], times:["morning"] },
    { text: "üí¨ Send a quick check-in: ‚ÄúThinking of you. How are you today?‚Äù", tags: ["anxious","low","positive"], times:["afternoon","evening"] },
    { text: "üõè Before bed, name one thing you did well and one tiny thing to try tomorrow.", tags: ["low","neutral","positive"], times:["evening","night"] },
    { text: "üå± Box breathing: inhale 4s, hold 4s, exhale 4s, hold 4s. Do 3‚Äì4 rounds.", tags: ["anxious","calm","neutral"], times:["any"] },
    { text: "üïØ Take a warm shower; focus on smell and warmth to ground your body.", tags: ["anxious","low","neutral"], times:["evening","night"] },
    { text: "üçé Have a nourishing snack (fruit, nuts, or yogurt). Don‚Äôt skip meals when stressed.", tags: ["low","anxious","neutral"], times:["morning","afternoon"] },
    { text: "üìö Read 2‚Äì3 pages of a comforting book instead of scrolling before sleep.", tags: ["low","neutral","positive"], times:["evening","night"] },
    { text: "üåª Do one kind act: a compliment, a thank-you, or share something helpful.", tags: ["positive","neutral","low"], times:["any"] },
    { text: "ü™û Say one kind sentence to yourself in the mirror. Talk like a friend.", tags: ["low","neutral","positive"], times:["morning","evening"] },
    { text: "üß© Pick one tiny task (2‚Äì5 min). Start now ‚Äî momentum beats motivation.", tags: ["anxious","low","neutral"], times:["morning","afternoon"] },
    { text: "üì¥ Take a 15-minute screen break. Stand up, look far away, relax your jaw.", tags: ["anxious","neutral","calm"], times:["afternoon"] },
    { text: "üé® Do a micro-creative burst: doodle 3 minutes or photograph something beautiful.", tags: ["low","positive","neutral"], times:["afternoon","evening"] },
    { text: "üïä Write a note to your future self: one reassurance you‚Äôll be glad to read later.", tags: ["calm","neutral","positive"], times:["night"] },
    { text: "üåô Wind down earlier: dim lights and avoid heavy topics 30 minutes before bed.", tags: ["low","anxious","neutral"], times:["evening","night"] }
  ];
  let currentTipFilter='all';
  let currentTipObj=null;

  // üîß FIX: bring back lastMoodTag used when opening Tips
  function lastMoodTag(){
    const arr=getJSON(KEY_HISTORY, []);
    if(!arr.length) return 'all';
    const last=arr[arr.length-1].mood_value;
    if(last<=1) return 'low';
    if(last===2) return 'neutral';
    if(last>=3) return 'positive';
    return 'all';
  }

  function getDaypart(){ const h=new Date().getHours(); if(h>=5&&h<12)return'morning'; if(h>=12&&h<17)return'afternoon'; if(h>=17&&h<21)return'evening'; return'night'; }
  function greetingFor(d){ return d==='morning'?'Good morning! Try this reset idea‚Ä¶':d==='afternoon'?'Good afternoon! A quick refresh‚Ä¶':d==='evening'?'Good evening! Try this wind-down tip‚Ä¶':'It‚Äôs a quiet time ‚Äî here‚Äôs a gentle tip‚Ä¶'; }
  function pickTip(filter='all'){
    const day=getDaypart();
    const fitsFilter=t=>filter==='all'||(t.tags||[]).includes(filter);
    const fitsTime=t=>!t.times||t.times.includes('any')||t.times.includes(day);
    const pool=TIPS.filter(fitsFilter);
    const timed=pool.filter(fitsTime);
    const src=timed.length?timed:pool;
    return src[Math.floor(Math.random()*src.length)];
  }
  function renderTip(){
    const day=getDaypart();
    if(tipsGreeting) tipsGreeting.textContent=greetingFor(day);
    const fallback={text:"Take a slow deep breath ‚Äî you‚Äôve got this.",tags:["all"]};
    const tip=pickTip(currentTipFilter) || fallback;
    currentTipObj=tip;
    tipText.textContent=tip.text;
    tipNote.textContent=currentTipFilter==='all'?`Suggested for: ${day}`:`Filter: ${currentTipFilter} ‚Ä¢ Suggested for: ${day}`;
    if(tipStatus) tipStatus.style.display='none';
  }
  function renderSavedTips(){
    const saved=getSavedTips();
    if(!saved.length){ savedTipsList.innerHTML='<li><em>No saved tips yet.</em></li>'; return; }
    savedTipsList.innerHTML=saved.slice().reverse().map(t=>`<li>${t.text} <br><small>Saved ${new Date(t.saved_at).toLocaleString()}</small></li>`).join('');
  }
  if (tipSaveBtn) tipSaveBtn.addEventListener('click', ()=>{
    if(!currentTipObj) return;
    const saved=getSavedTips();
    if(!saved.find(s=>s.text===currentTipObj.text)){
      saved.push({text:currentTipObj.text,saved_at:new Date().toISOString()});
      setSavedTips(saved); renderSavedTips();
    }
    tipStatus.textContent='‚≠ê Saved!'; tipStatus.style.display='block'; updateHeaderPills();
  });
  if (tipDoneBtn) tipDoneBtn.addEventListener('click', ()=>{
    if(!currentTipObj) return;
    const done=getDoneTips(); done.push({text:currentTipObj.text,done_at:new Date().toISOString()});
    setDoneTips(done); tipStatus.textContent='‚úÖ Great job ‚Äî marked as done!'; tipStatus.style.display='block'; updateHeaderPills();
  });
  document.querySelectorAll('.tip-filter').forEach(btn=>{
    btn.addEventListener('click', ()=>{ currentTipFilter=btn.dataset.filter||'all'; renderTip(); });
  });
  if (nextTipBtn) nextTipBtn.addEventListener('click', renderTip);

  /* ---------------- Crisis smart-routing ---------------- */
  function verySadStreak3Days(){
    const hist=getJSON(KEY_HISTORY, []);
    if(hist.length<3) return false;
    const days=[]; for(let i=0;i<3;i++){ const d=new Date(); d.setDate(d.getDate()-i); days.push(d.toISOString().slice(0,10)); }
    return days.every(ds=>{
      const entries=hist.filter(h=>h.ts.slice(0,10)===ds);
      if(!entries.length) return false;
      const last=entries[entries.length-1].mood_value;
      return last<=1; // Sad or Very Sad
    });
  }
  function maybeShowCrisis(){
    if(!crisisBanner) return;
    const today=todayStr();
    const dismissed=localStorage.getItem(KEY_CRISIS_DISMISS);
    if(dismissed===today){ crisisBanner.style.display='none'; return; }
    crisisBanner.style.display = verySadStreak3Days() ? 'block' : 'none';
  }
  if (dismissCrisis) dismissCrisis.addEventListener('click', ()=>{
    localStorage.setItem(KEY_CRISIS_DISMISS, todayStr());
    crisisBanner.style.display='none';
  });

  /* ---------------- Boot ---------------- */
  // üîß FIX: do NOT auto-show Home; keep Start ‚Üí Language ‚Üí Home
  startBtn.style.display=''; // visible on first load
  // No call to show(homeSection) here.
</script>
